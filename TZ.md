# Техническое задание на проект: "NHL Stats Tracker"

NHL Stats Tracker - Веб‑сервис статистики игроков НХЛ для болельщиков с целью аналитики сезонов по командам и метрикам

## Цель проекта
Создание веб‑сервиса, который позволяет болельщикам НХЛ анализировать статистику полевых игроков по сезонам, командам и ключевым метрикам (голы, передачи, очки, время на льду и т.д.).
Сервис помогает пользователю быстро находить нужных игроков, сравнивать их показатели и получать наглядную аналитику по выбранной команде и сезону.

## Роли пользователей
- **Гость**: просмотр общего списка игроков и их статистики за выбранный сезон, фильтрация по командам и позициям, просмотр базовой аналитики (топ‑списки, лидеры по метрикам).
- **Зарегистрированный пользователь**: создание и сохранение собственных «подборок» игроков (избранное/списки сравнения), сохранение преднастроенных фильтров (например, «форварды NYR с ≥20 голами»).
- **Администратор**: доступ к административной панели для управления пользователями, пересинхронизации данных, запуска ручного обновления статистики из внешнего API.

## Модели данных (сущности)

### Team (Команда)
| Поле         | Описание                                 |
|--------------|------------------------------------------|
| name         | Полное название команды                  |
| abbrev       | Краткое обозначение команды              |
| conference   | Конференция (East/West)                  |
| division     | Дивизион (Metropolitan, Atlantic и т.д.) |
| external_id  | Идентификатор команды во внешнем API      |

### Player (Игрок)
| Поле          | Описание                             |
|---------------|--------------------------------------|
| full_name     | Полное имя игрока                    |
| last_name     | Фамилия игрока                       |
| position      | Позиция (C, L, R, D)                |
| shoots_catches| Хват (L/R)                           |
| external_id   | Идентификатор игрока во внешнем API  |
| teams         | Связь ManyToMany с Team              |

### PlayerSeasonStat (Статистика игрока за сезон)
| Поле                 | Описание                                           |
|----------------------|----------------------------------------------------|
| player               | ForeignKey на Player                               |
| team                 | ForeignKey на Team                                 |
| season_id            | Код сезона (например, 20232024)                    |
| games_played         | Количество сыгранных матчей                      |
| goals                | Голы                                               |
| assists              | Передачи                                           |
| points               | Очки                                               |
| plus_minus           | Показатель плюс/минус                             |
| shots                | Количество бросков                                 |
| shooting_pct         | Процент реализации бросков                         |
| pp_goals / pp_points | Голы и очки в большинстве                         |
| sh_goals / sh_points | Голы и очки в меньшинстве                         |
| ev_goals / ev_points | Голы и очки в равных составах                     |
| time_on_ice_per_game | Среднее время на льду за матч                     |
| faceoff_win_pct      | Процент выигранных вбрасываний (для центров)       |

## Ключевой функционал (User Stories)

- **Просмотр общей статистики:** 
Пользователь выбирает сезон(например, 2023–2024), после чего сервис отображает таблицу с игроками и их ключевыми показателями (матчи, голы, передачи, очки, плюс/минус, время на льду).
Пользователь может сортировать таблицу по любой метрике (по команде, голам, очкам, времени на льду и т.д.) и быстро находить лидеров команды.

- **Фильтрация и поиск по игрокам:**  
Пользователь открывает страницу общего списка игроков сезона, задает фильтры: команда, позиция (например, только защитники), минимальное количество матчей и минимальное количество очков.
Система применяет фильтры к данным и выводит результирующий список игроков, позволяя сортировать его по различным статистическим полям и переходить на детальную страницу игрока.

- **Личные подборки:** 
Авторизованный пользователь добавляет интересующих его игроков в «избранное» или создает именованный список (например, «топ форварды Запада»).
Сервис сохраняет этот список, и в дальнейшем пользователь может одним кликом открыть его и увидеть актуальные показатели выбранных игроков в текущем сезоне.

- **Обновление статистики из внешнего API:**  
Администратор (или фоновый планировщик) запускает задачу обновления статистики.
Сервис отправляет запросы к внешнему NHL‑API, постранично загружает статистику игроков по выбранному сезону, обновляет или создает записи Player, Team и PlayerSeasonStat в базе данных, после чего пользователи видят свежие данные без ручного ввода.

## Внешние интеграции / Аналитика

- **Интеграции:**  
  Используется публичный NHL API:  
  `https://api.nhle.com/stats/rest/en/skater/summary`  
  Реализована постраничная загрузка (параметры `start` и `limit`).

- **Аналитика:**  
  Расчет производных метрик (очки за матч, очки за 60 минут, рейтинги).